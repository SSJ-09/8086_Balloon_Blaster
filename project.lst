     1                                  org 100h
     2                                  ; ------------------------------
     3                                  ; Balloon Popping Game - Main Menu
     4                                  ; Combined background + menu items
     5                                  ; ------------------------------
     6 00000000 E92827                  jmp main_menu
     7                                  
     8                                  ; ===== COLOR DEFINITIONS =====
     9 00000003 00                      ColorHolder db 0
    10 00000004 0000                    write_word dw 0
    11                                  
    12 00000006 2E01                    white: dw 302
    13 00000008 2D01                    blue: dw 301
    14 0000000A 2C01                    red: dw 300
    15 0000000C 2F01                    black: dw 303
    16                                  
    17                                  ; ===== RECTANGLE POSITIONS =====
    18 0000000E 3C00                    x1: dw 60
    19 00000010 3200                    y1: dw 50
    20 00000012 C800                    w1: dw 200
    21 00000014 1400                    h1: dw 20
    22                                  
    23 00000016 3C00                    x2: dw 60
    24 00000018 6400                    y2: dw 100
    25 0000001A C800                    w2: dw 200
    26 0000001C 1400                    h2: dw 20
    27                                  
    28 0000001E 3C00                    x3: dw 60
    29 00000020 9600                    y3: dw 150
    30 00000022 C800                    w3: dw 200
    31 00000024 1400                    h3: dw 20
    32                                  
    33                                  
    34                                  ; -------------------------------------
    35                                  ; Balloon bitmap data (16x24 pixels)
    36                                  ; Three separate bitmaps for layers
    37                                  ; -------------------------------------
    38                                  Balloon_body:
    39 00000026 C007                        dw 0000011111000000b  ; row 0 - top of balloon
    40 00000028 F01F                        dw 0001111111110000b  ; row 1
    41 0000002A F83F                        dw 0011111111111000b  ; row 2
    42 0000002C FC7F                        dw 0111111111111100b  ; row 3
    43 0000002E FE7F                        dw 0111111111111110b  ; row 4
    44 00000030 FFFF                        dw 1111111111111111b  ; row 5
    45 00000032 FFFF                        dw 1111111111111111b  ; row 6 - widest part
    46 00000034 FFFF                        dw 1111111111111111b  ; row 7
    47 00000036 FFFF                        dw 1111111111111111b  ; row 8
    48 00000038 FFFF                        dw 1111111111111111b  ; row 9
    49 0000003A FFFF                        dw 1111111111111111b  ; row 10
    50 0000003C FFFF                        dw 1111111111111111b  ; row 11
    51 0000003E FE7F                        dw 0111111111111110b  ; row 12 - narrowing
    52 00000040 FE7F                        dw 0111111111111110b  ; row 13
    53 00000042 FC3F                        dw 0011111111111100b  ; row 14
    54 00000044 F81F                        dw 0001111111111000b  ; row 15
    55 00000046 F00F                        dw 0000111111110000b  ; row 16
    56 00000048 E007                        dw 0000011111100000b  ; row 17 - bottom of balloon
    57 0000004A 8001                        dw 0000000110000000b  ; row 18 - tie/knot
    58 0000004C 8001                        dw 0000000110000000b  ; row 19
    59 0000004E 0000                        dw 0000000000000000b  ; row 20 - string area (body layer empty)
    60 00000050 0000                        dw 0000000000000000b  ; row 21
    61 00000052 0000                        dw 0000000000000000b  ; row 22
    62 00000054 0000                        dw 0000000000000000b  ; row 23
    63                                  
    64                                  Balloon_shadow:
    65 00000056 0000                        dw 0000000000000000b  ; row 0
    66 00000058 0000                        dw 0000000000000000b  ; row 1
    67 0000005A 001C                        dw 0001110000000000b  ; row 2 - highlight starts
    68 0000005C 0038                        dw 0011100000000000b  ; row 3
    69 0000005E 0030                        dw 0011000000000000b  ; row 4
    70 00000060 0060                        dw 0110000000000000b  ; row 5
    71 00000062 0040                        dw 0100000000000000b  ; row 6
    72 00000064 0000                        dw 0000000000000000b  ; row 7
    73 00000066 0000                        dw 0000000000000000b  ; row 8
    74 00000068 0000                        dw 0000000000000000b  ; row 9
    75 0000006A 0000                        dw 0000000000000000b  ; row 10
    76 0000006C 0000                        dw 0000000000000000b  ; row 11
    77 0000006E 0000                        dw 0000000000000000b  ; row 12
    78 00000070 0000                        dw 0000000000000000b  ; row 13
    79 00000072 0000                        dw 0000000000000000b  ; row 14
    80 00000074 0000                        dw 0000000000000000b  ; row 15
    81 00000076 0000                        dw 0000000000000000b  ; row 16
    82 00000078 0000                        dw 0000000000000000b  ; row 17
    83 0000007A 0000                        dw 0000000000000000b  ; row 18
    84 0000007C 0000                        dw 0000000000000000b  ; row 19
    85 0000007E 0000                        dw 0000000000000000b  ; row 20
    86 00000080 0000                        dw 0000000000000000b  ; row 21
    87 00000082 0000                        dw 0000000000000000b  ; row 22
    88 00000084 0000                        dw 0000000000000000b  ; row 23
    89                                  
    90                                  Balloon_string:
    91 00000086 0000                        dw 0000000000000000b  ; row 0
    92 00000088 0000                        dw 0000000000000000b  ; row 1
    93 0000008A 0000                        dw 0000000000000000b  ; row 2
    94 0000008C 0000                        dw 0000000000000000b  ; row 3
    95 0000008E 0000                        dw 0000000000000000b  ; row 4
    96 00000090 0000                        dw 0000000000000000b  ; row 5
    97 00000092 0000                        dw 0000000000000000b  ; row 6
    98 00000094 0000                        dw 0000000000000000b  ; row 7
    99 00000096 0000                        dw 0000000000000000b  ; row 8
   100 00000098 0000                        dw 0000000000000000b  ; row 9
   101 0000009A 0000                        dw 0000000000000000b  ; row 10
   102 0000009C 0000                        dw 0000000000000000b  ; row 11
   103 0000009E 0000                        dw 0000000000000000b  ; row 12
   104 000000A0 0000                        dw 0000000000000000b  ; row 13
   105 000000A2 0000                        dw 0000000000000000b  ; row 14
   106 000000A4 0000                        dw 0000000000000000b  ; row 15
   107 000000A6 0000                        dw 0000000000000000b  ; row 16
   108 000000A8 0000                        dw 0000000000000000b  ; row 17
   109 000000AA 0000                        dw 0000000000000000b  ; row 18
   110 000000AC 0000                        dw 0000000000000000b  ; row 19
   111 000000AE 0003                        dw 0000001100000000b  ; row 20 - string curves
   112 000000B0 8001                        dw 0000000110000000b  ; row 21
   113 000000B2 0003                        dw 0000001100000000b  ; row 22
   114 000000B4 8001                        dw 0000000110000000b  ; row 23
   115                                  
   116                                  ; Temporary storage for current row being drawn
   117 000000B6 0000                    CurrentRow_Body dw 0
   118 000000B8 0000                    CurrentRow_Shadow dw 0
   119 000000BA 0000                    CurrentRow_String dw 0
   120 000000BC 00                      BalloonColor db 0
   121                                  ; ===== FONT DATA (8x8 BITMAPS) =====
   122 000000BD 1824427E                A_data db 00011000b, 00100100b, 01000010b, 01111110b
   123 000000C1 42420000                       db 01000010b, 01000010b, 00000000b, 00000000b
   124                                  
   125 000000C5 7C427C42                B_data db 01111100b, 01000010b, 01111100b, 01000010b
   126 000000C9 427C0000                       db 01000010b, 01111100b, 00000000b, 00000000b
   127                                  
   128 000000CD 3E404040                C_data db 00111110b, 01000000b, 01000000b, 01000000b
   129 000000D1 403E0000                       db 01000000b, 00111110b, 00000000b, 00000000b
   130                                  
   131 000000D5 7C424242                D_data db 01111100b, 01000010b, 01000010b, 01000010b
   132 000000D9 427C0000                       db 01000010b, 01111100b, 00000000b, 00000000b
   133                                  
   134 000000DD 7E407C40                E_data db 01111110b, 01000000b, 01111100b, 01000000b
   135 000000E1 407E0000                       db 01000000b, 01111110b, 00000000b, 00000000b
   136                                  
   137 000000E5 7E407C40                F_data db 01111110b, 01000000b, 01111100b, 01000000b
   138 000000E9 40400000                       db 01000000b, 01000000b, 00000000b, 00000000b
   139                                  
   140 000000ED 3E404E42                G_data db 00111110b, 01000000b, 01001110b, 01000010b
   141 000000F1 423C0000                       db 01000010b, 00111100b, 00000000b, 00000000b
   142                                  
   143 000000F5 42427E42                H_data db 01000010b, 01000010b, 01111110b, 01000010b
   144 000000F9 42420000                       db 01000010b, 01000010b, 00000000b, 00000000b
   145                                  
   146 000000FD 3C101010                I_data db 00111100b, 00010000b, 00010000b, 00010000b
   147 00000101 103C0000                       db 00010000b, 00111100b, 00000000b, 00000000b
   148                                  
   149 00000105 1E080848                J_data db 00011110b, 00001000b, 00001000b, 01001000b
   150 00000109 48300000                       db 01001000b, 00110000b, 00000000b, 00000000b
   151                                  
   152 0000010D 42447848                K_data db 01000010b, 01000100b, 01111000b, 01001000b
   153 00000111 44420000                       db 01000100b, 01000010b, 00000000b, 00000000b
   154                                  
   155 00000115 40404040                L_data db 01000000b, 01000000b, 01000000b, 01000000b
   156 00000119 407E0000                       db 01000000b, 01111110b, 00000000b, 00000000b
   157                                  
   158 0000011D 42665A42                M_data db 01000010b, 01100110b, 01011010b, 01000010b
   159 00000121 42420000                       db 01000010b, 01000010b, 00000000b, 00000000b
   160                                  
   161 00000125 4262524A                N_data db 01000010b, 01100010b, 01010010b, 01001010b
   162 00000129 46420000                       db 01000110b, 01000010b, 00000000b, 00000000b
   163                                  
   164 0000012D 3C424242                O_data db 00111100b, 01000010b, 01000010b, 01000010b
   165 00000131 423C0000                       db 01000010b, 00111100b, 00000000b, 00000000b
   166                                  
   167 00000135 7C42427C                P_data db 01111100b, 01000010b, 01000010b, 01111100b
   168 00000139 40400000                       db 01000000b, 01000000b, 00000000b, 00000000b
   169                                  
   170 0000013D 3C424242                Q_data db 00111100b, 01000010b, 01000010b, 01000010b
   171 00000141 423E0100                       db 01000010b, 00111110b, 00000001b, 00000000b
   172                                  
   173 00000145 7C427C48                R_data db 01111100b, 01000010b, 01111100b, 01001000b
   174 00000149 44420000                       db 01000100b, 01000010b, 00000000b, 00000000b
   175                                  
   176 0000014D 3E403C02                S_data db 00111110b, 01000000b, 00111100b, 00000010b
   177 00000151 027C0000                       db 00000010b, 01111100b, 00000000b, 00000000b
   178                                  
   179 00000155 7E101010                T_data db 01111110b, 00010000b, 00010000b, 00010000b
   180 00000159 10100000                       db 00010000b, 00010000b, 00000000b, 00000000b
   181                                  
   182 0000015D 42424242                U_data db 01000010b, 01000010b, 01000010b, 01000010b
   183 00000161 423C0000                       db 01000010b, 00111100b, 00000000b, 00000000b
   184                                  
   185 00000165 42424224                V_data db 01000010b, 01000010b, 01000010b, 00100100b
   186 00000169 24180000                       db 00100100b, 00011000b, 00000000b, 00000000b
   187                                  
   188 0000016D 4242425A                W_data db 01000010b, 01000010b, 01000010b, 01011010b
   189 00000171 66420000                       db 01100110b, 01000010b, 00000000b, 00000000b
   190                                  
   191 00000175 42241818                X_data db 01000010b, 00100100b, 00011000b, 00011000b
   192 00000179 24420000                       db 00100100b, 01000010b, 00000000b, 00000000b
   193                                  
   194 0000017D 41221408                Y_data db 01000001b, 00100010b, 00010100b, 00001000b
   195 00000181 08080000                       db 00001000b, 00001000b, 00000000b, 00000000b
   196                                  
   197 00000185 3C040810                Z_data db 00111100b, 00000100b, 00001000b, 00010000b
   198 00000189 203C0000                       db 00100000b, 00111100b, 00000000b, 00000000b
   199                                  	   
   200 0000018D 08                      one_data  db 00001000b
   201 0000018E 18                                db 00011000b
   202 0000018F 08                                db 00001000b
   203 00000190 08                                db 00001000b
   204 00000191 08                                db 00001000b
   205 00000192 08                                db 00001000b
   206 00000193 3E                                db 00111110b
   207 00000194 00                                db 00000000b
   208                                  
   209 00000195 3C                      two_data  db 00111100b
   210 00000196 42                                db 01000010b
   211 00000197 02                                db 00000010b
   212 00000198 0C                                db 00001100b
   213 00000199 30                                db 00110000b
   214 0000019A 40                                db 01000000b
   215 0000019B 7E                                db 01111110b
   216 0000019C 00                                db 00000000b
   217                                  
   218 0000019D 7C                      three_data db 01111100b
   219 0000019E 02                                 db 00000010b
   220 0000019F 02                                 db 00000010b
   221 000001A0 3C                                 db 00111100b
   222 000001A1 02                                 db 00000010b
   223 000001A2 02                                 db 00000010b
   224 000001A3 7C                                 db 01111100b
   225 000001A4 00                                 db 00000000b
   226                                  
   227 000001A5 44                      four_data db 01000100b
   228 000001A6 44                                db 01000100b
   229 000001A7 44                                db 01000100b
   230 000001A8 7E                                db 01111110b
   231 000001A9 04                                db 00000100b
   232 000001AA 04                                db 00000100b
   233 000001AB 04                                db 00000100b
   234 000001AC 00                                db 00000000b
   235                                  
   236 000001AD 7E                      five_data db 01111110b
   237 000001AE 40                                db 01000000b
   238 000001AF 40                                db 01000000b
   239 000001B0 7C                                db 01111100b
   240 000001B1 02                                db 00000010b
   241 000001B2 02                                db 00000010b
   242 000001B3 7C                                db 01111100b
   243 000001B4 00                                db 00000000b
   244                                  
   245 000001B5 3C                      six_data  db 00111100b
   246 000001B6 40                                db 01000000b
   247 000001B7 40                                db 01000000b
   248 000001B8 7C                                db 01111100b
   249 000001B9 42                                db 01000010b
   250 000001BA 42                                db 01000010b
   251 000001BB 3C                                db 00111100b
   252 000001BC 00                                db 00000000b
   253                                  
   254 000001BD 7E                      seven_data db 01111110b
   255 000001BE 02                                 db 00000010b
   256 000001BF 04                                 db 00000100b
   257 000001C0 08                                 db 00001000b
   258 000001C1 10                                 db 00010000b
   259 000001C2 10                                 db 00010000b
   260 000001C3 10                                 db 00010000b
   261 000001C4 00                                 db 00000000b
   262                                  
   263 000001C5 3C                      eight_data db 00111100b
   264 000001C6 42                                 db 01000010b
   265 000001C7 42                                 db 01000010b
   266 000001C8 3C                                 db 00111100b
   267 000001C9 42                                 db 01000010b
   268 000001CA 42                                 db 01000010b
   269 000001CB 3C                                 db 00111100b
   270 000001CC 00                                 db 00000000b
   271                                  
   272 000001CD 3C                      nine_data db 00111100b
   273 000001CE 42                                db 01000010b
   274 000001CF 42                                db 01000010b
   275 000001D0 3E                                db 00111110b
   276 000001D1 02                                db 00000010b
   277 000001D2 02                                db 00000010b
   278 000001D3 3C                                db 00111100b
   279 000001D4 00                                db 00000000b
   280                                  
   281                                  ; ===== BACKGROUND FILE DATA =====
   282 000001D5 66696E616C6D752E72-     filename db "finalmu.raw", 0
   282 000001DE 617700             
   283                                  chunkSize equ 8192
   284 000001E1 00<rep 2000h>           buffer times chunkSize db 0
   285                                  
   286 000021E1 90<rep Fh>              align 16
   287                                  palette:
   288 000021F0 <bin 300h>                  incbin "vga_palette.bin"   ; 768 bytes (256*3)
   289                                  
   290                                  drawBackground:
   291 000024F0 50                          push ax
   292 000024F1 53                          push bx
   293 000024F2 51                          push cx
   294 000024F3 52                          push dx
   295 000024F4 56                          push si
   296 000024F5 57                          push di
   297 000024F6 1E                          push ds
   298 000024F7 06                          push es
   299                                  
   300                                      ; --- Load VGA palette ---
   301 000024F8 31DB                        xor bx, bx
   302 000024FA B90001                      mov cx, 256
   303 000024FD 0E                          push cs
   304 000024FE 07                          pop es
   305 000024FF BA[F021]                    mov dx, palette
   306 00002502 B81210                      mov ax, 0x1012
   307 00002505 CD10                        int 0x10
   308                                  
   309                                      ; --- Set ES to video memory ---
   310 00002507 B800A0                      mov ax, 0xA000
   311 0000250A 8EC0                        mov es, ax
   312 0000250C 31FF                        xor di, di
   313                                  
   314                                      ; --- Open file ---
   315 0000250E BA[D501]                    mov dx, filename
   316 00002511 B43D                        mov ah, 0x3D
   317 00002513 30C0                        xor al, al
   318 00002515 CD21                        int 0x21
   319 00002517 7221                        jc file_error
   320 00002519 89C3                        mov bx, ax          ; BX = file handle
   321                                  
   322                                  read_loop:
   323                                      ; Read chunk
   324 0000251B B43F                        mov ah, 0x3F
   325 0000251D B90020                      mov cx, chunkSize
   326 00002520 BA[E101]                    mov dx, buffer
   327 00002523 CD21                        int 0x21
   328 00002525 09C0                        or ax, ax
   329 00002527 740D                        jz finished_reading ; EOF reached
   330                                  
   331                                      ; Copy AX bytes from DS:buffer to ES:DI
   332 00002529 1E                          push ds
   333 0000252A 06                          push es
   334 0000252B BE[E101]                    mov si, buffer
   335 0000252E 89C1                        mov cx, ax
   336 00002530 F3A4                        rep movsb
   337 00002532 07                          pop es
   338 00002533 1F                          pop ds
   339 00002534 EBE5                        jmp read_loop
   340                                  
   341                                  finished_reading:
   342                                      ; Close file
   343 00002536 B43E                        mov ah, 0x3E
   344 00002538 CD21                        int 0x21
   345                                  
   346                                  file_error:
   347 0000253A 07                          pop es
   348 0000253B 1F                          pop ds
   349 0000253C 5F                          pop di
   350 0000253D 5E                          pop si
   351 0000253E 5A                          pop dx
   352 0000253F 59                          pop cx
   353 00002540 5B                          pop bx
   354 00002541 58                          pop ax
   355 00002542 C3                          ret
   356                                  	
   357                                  	
   358                                  	
   359                                  	; -------------------------------------
   360                                  ; DrawBalloon
   361                                  ; Draws 16x24 balloon sprite (16 wide, 24 tall)
   362                                  ; Call convention:
   363                                  ;   CX = x (top-left), DX = y (top-left), AL = balloon color
   364                                  ; String is always black (0), shadow is always white (15)
   365                                  ; -------------------------------------
   366                                  DrawBalloon:
   367 00002543 50                          push ax
   368 00002544 53                          push bx
   369 00002545 51                          push cx
   370 00002546 52                          push dx
   371 00002547 56                          push si
   372 00002548 57                          push di
   373 00002549 55                          push bp
   374                                      
   375 0000254A A2[BC00]                    mov [BalloonColor], al  ; save balloon color
   376 0000254D BE0000                      mov si, 0               ; SI = row index (0-23)
   377                                      
   378                                  RowLoop_Balloon:
   379                                      ; Get bitmap words for this row
   380 00002550 89F3                        mov bx, si
   381 00002552 D1E3                        shl bx, 1               ; multiply by 2 (each row is 2 bytes)
   382                                      
   383                                      ; Get balloon body bitmap
   384 00002554 8B87[2600]                  mov ax, [Balloon_body + bx]
   385 00002558 A3[B600]                    mov [CurrentRow_Body], ax
   386                                      
   387                                      ; Get shadow bitmap
   388 0000255B 8B87[5600]                  mov ax, [Balloon_shadow + bx]
   389 0000255F A3[B800]                    mov [CurrentRow_Shadow], ax
   390                                      
   391                                      ; Get string bitmap
   392 00002562 8B87[8600]                  mov ax, [Balloon_string + bx]
   393 00002566 A3[BA00]                    mov [CurrentRow_String], ax
   394                                      
   395 00002569 51                          push cx                 ; save start X for this row
   396 0000256A BD1000                      mov bp, 16              ; BP = bit counter (16 bits per row)
   397                                      
   398                                  ColLoop_Balloon:
   399                                      ; Check string first (highest priority - black)
   400 0000256D A1[BA00]                    mov ax, [CurrentRow_String]
   401 00002570 A90080                      test ax, 8000h          ; check MSB
   402 00002573 7512                        jnz DrawString_Balloon
   403                                      
   404                                      ; Check shadow (white)
   405 00002575 A1[B800]                    mov ax, [CurrentRow_Shadow]
   406 00002578 A90080                      test ax, 8000h
   407 0000257B 7516                        jnz DrawShadow_Balloon
   408                                      
   409                                      ; Check balloon body (colored)
   410 0000257D A1[B600]                    mov ax, [CurrentRow_Body]
   411 00002580 A90080                      test ax, 8000h
   412 00002583 751A                        jnz DrawBody_Balloon
   413                                      
   414                                      ; If none, skip (transparent)
   415 00002585 EB22                        jmp NextPixel_Balloon
   416                                      
   417                                  DrawString_Balloon:
   418 00002587 51                          push cx
   419 00002588 52                          push dx
   420 00002589 A0[0C00]                    mov al, [black]               ; black color for string
   421 0000258C E83A00                      call DrawPixel
   422 0000258F 5A                          pop dx
   423 00002590 59                          pop cx
   424 00002591 EB16                        jmp NextPixel_Balloon
   425                                      
   426                                  DrawShadow_Balloon:
   427 00002593 51                          push cx
   428 00002594 52                          push dx
   429 00002595 A0[0600]                    mov al, [white]              ; white color for shadow
   430 00002598 E82E00                      call DrawPixel
   431 0000259B 5A                          pop dx
   432 0000259C 59                          pop cx
   433 0000259D EB0A                        jmp NextPixel_Balloon
   434                                      
   435                                  DrawBody_Balloon:
   436 0000259F 51                          push cx
   437 000025A0 52                          push dx
   438 000025A1 A0[BC00]                    mov al, [BalloonColor]  ; use balloon color
   439 000025A4 E82200                      call DrawPixel
   440 000025A7 5A                          pop dx
   441 000025A8 59                          pop cx
   442                                      
   443                                  NextPixel_Balloon:
   444                                      ; Shift all bitmaps left for next pixel
   445 000025A9 D126[B600]                  shl word [CurrentRow_Body], 1
   446 000025AD D126[B800]                  shl word [CurrentRow_Shadow], 1
   447 000025B1 D126[BA00]                  shl word [CurrentRow_String], 1
   448                                      
   449 000025B5 41                          inc cx                  ; move to next X
   450 000025B6 4D                          dec bp
   451 000025B7 75B4                        jnz ColLoop_Balloon
   452                                      
   453 000025B9 59                          pop cx                  ; restore start X
   454 000025BA 42                          inc dx                  ; move to next Y (row)
   455 000025BB 46                          inc si                  ; next row index
   456 000025BC 83FE18                      cmp si, 24              ; done all 24 rows?
   457 000025BF 7C8F                        jl RowLoop_Balloon
   458                                      
   459 000025C1 5D                          pop bp
   460 000025C2 5F                          pop di
   461 000025C3 5E                          pop si
   462 000025C4 5A                          pop dx
   463 000025C5 59                          pop cx
   464 000025C6 5B                          pop bx
   465 000025C7 58                          pop ax
   466 000025C8 C3                          ret
   467                                  
   468                                  ; -------------------------------------
   469                                  ; DrawPixel
   470                                  ; Draw single pixel at (CX, DX) with color AL
   471                                  ; -------------------------------------
   472                                  DrawPixel:
   473 000025C9 50                          push ax
   474 000025CA 53                          push bx
   475 000025CB 51                          push cx
   476 000025CC 52                          push dx
   477 000025CD 57                          push di
   478                                      
   479 000025CE 50                          push ax                 ; save color (AL)
   480                                      
   481                                      ; Calculate offset: y * 320 + x
   482 000025CF 89D0                        mov ax, dx              ; AX = y
   483 000025D1 BB4001                      mov bx, 320
   484 000025D4 F7E3                        mul bx                  ; DX:AX = y * 320
   485 000025D6 01C8                        add ax, cx              ; AX = y * 320 + x
   486 000025D8 89C7                        mov di, ax              ; DI = offset
   487                                      
   488 000025DA 58                          pop ax                  ; restore color
   489 000025DB 268805                      mov byte [es:di], al    ; write pixel
   490                                      
   491 000025DE 5F                          pop di
   492 000025DF 5A                          pop dx
   493 000025E0 59                          pop cx
   494 000025E1 5B                          pop bx
   495 000025E2 58                          pop ax
   496 000025E3 C3                          ret
   497                                  
   498                                  DrawBlock:
   499 000025E4 50                          push ax
   500 000025E5 53                          push bx
   501 000025E6 51                          push cx
   502 000025E7 52                          push dx
   503 000025E8 57                          push di
   504 000025E9 55                          push bp
   505                                      
   506 000025EA A0[0300]                    mov al, [ColorHolder]
   507 000025ED 89F5                        mov bp, si
   508                                      
   509 000025EF BB0000                      mov bx, 0
   510                                  RowLoop_DB:
   511 000025F2 50                          push ax
   512 000025F3 89D0                        mov ax, dx
   513 000025F5 01D8                        add ax, bx
   514 000025F7 52                          push dx
   515 000025F8 BA4001                      mov dx, 320
   516 000025FB F7E2                        mul dx
   517 000025FD 5A                          pop dx
   518 000025FE 01C8                        add ax, cx
   519 00002600 89C7                        mov di, ax
   520 00002602 58                          pop ax
   521                                      
   522 00002603 53                          push bx
   523 00002604 89EB                        mov bx, bp
   524                                  ColLoop_DB:
   525 00002606 268805                      mov byte [es:di], al
   526 00002609 47                          inc di
   527 0000260A 4B                          dec bx
   528 0000260B 75F9                        jnz ColLoop_DB
   529                                      
   530 0000260D 5B                          pop bx
   531 0000260E 43                          inc bx
   532 0000260F 39EB                        cmp bx, bp
   533 00002611 7CDF                        jl RowLoop_DB
   534                                      
   535 00002613 5D                          pop bp
   536 00002614 5F                          pop di
   537 00002615 5A                          pop dx
   538 00002616 59                          pop cx
   539 00002617 5B                          pop bx
   540 00002618 58                          pop ax
   541 00002619 C3                          ret
   542                                  
   543                                  ; -------------------------------------
   544                                  ; DrawA
   545                                  ; Draws 8x8 bitmap scaled by SI
   546                                  ; -------------------------------------
   547                                  DrawA:
   548 0000261A 50                          push ax
   549 0000261B 53                          push bx
   550 0000261C 51                          push cx
   551 0000261D 52                          push dx
   552 0000261E 56                          push si
   553 0000261F 57                          push di
   554 00002620 55                          push bp
   555                                      
   556 00002621 89F5                        mov bp, si
   557 00002623 BE0000                      mov si, 0
   558                                      
   559                                  RowLoop_DA:
   560 00002626 8B1E[0400]                  mov bx, [write_word]
   561 0000262A 01F3                        add bx, si
   562 0000262C 8A07                        mov al, [bx]
   563                                      
   564 0000262E B308                        mov bl, 8
   565 00002630 51                          push cx
   566                                      
   567                                  ColLoop_DA:
   568 00002631 A880                        test al, 10000000b
   569 00002633 740F                        jz SkipPixel_DA
   570                                      
   571 00002635 50                          push ax
   572 00002636 53                          push bx
   573 00002637 51                          push cx
   574 00002638 52                          push dx
   575 00002639 56                          push si
   576                                      
   577 0000263A 89EE                        mov si, bp
   578 0000263C E8A5FF                      call DrawBlock
   579                                      
   580 0000263F 5E                          pop si
   581 00002640 5A                          pop dx
   582 00002641 59                          pop cx
   583 00002642 5B                          pop bx
   584 00002643 58                          pop ax
   585                                      
   586                                  SkipPixel_DA:
   587 00002644 D0E0                        shl al, 1
   588 00002646 01E9                        add cx, bp
   589 00002648 FECB                        dec bl
   590 0000264A 75E5                        jnz ColLoop_DA
   591                                      
   592 0000264C 59                          pop cx
   593 0000264D 01EA                        add dx, bp
   594 0000264F 46                          inc si
   595 00002650 83FE08                      cmp si, 8
   596 00002653 7CD1                        jl RowLoop_DA
   597                                      
   598 00002655 5D                          pop bp
   599 00002656 5F                          pop di
   600 00002657 5E                          pop si
   601 00002658 5A                          pop dx
   602 00002659 59                          pop cx
   603 0000265A 5B                          pop bx
   604 0000265B 58                          pop ax
   605 0000265C C3                          ret
   606                                  
   607                                  ; -------------------------------------
   608                                  ; clearScreen
   609                                  ; -------------------------------------
   610                                  clearScreen:
   611 0000265D 31C0                        xor ax, ax
   612 0000265F BF0000                      mov di, 0
   613 00002662 B900FA                      mov cx, 320*200
   614 00002665 F3AA                        rep stosb
   615 00002667 C3                          ret
   616                                  
   617                                  ; -------------------------------------
   618                                  ; drawRectangle
   619                                  ; bp + 4 = height, bp + 6 = width
   620                                  ; bp + 8 = y, bp + 10 = x, bp + 12 = color
   621                                  ; -------------------------------------
   622                                  drawRectangle:
   623 00002668 55                          push bp
   624 00002669 89E5                        mov bp, sp
   625 0000266B 50                          push ax
   626 0000266C 53                          push bx
   627 0000266D 51                          push cx
   628 0000266E 52                          push dx
   629 0000266F 56                          push si
   630 00002670 57                          push di
   631                                      
   632 00002671 8B4608                      mov ax, [bp + 8]
   633 00002674 BB4001                      mov bx, 320
   634 00002677 F7E3                        mul bx
   635 00002679 03460A                      add ax, [bp + 10]
   636 0000267C 89C6                        mov si, ax
   637 0000267E 89C1                        mov cx, ax
   638                                      
   639 00002680 89C7                        mov di, ax
   640 00002682 037E06                      add di, [bp + 6]
   641                                      
   642 00002685 8B4608                      mov ax, [bp + 8]
   643 00002688 034604                      add ax, [bp + 4]
   644 0000268B F7E3                        mul bx
   645 0000268D 03460A                      add ax, [bp + 10]
   646                                      
   647 00002690 8A560C                      mov dl, [bp + 12]
   648                                  Top_Left_to_Top_Right:
   649 00002693 268814                      mov [es:si], dl
   650 00002696 46                          inc si
   651 00002697 39FE                        cmp si, di
   652 00002699 76F8                        jbe Top_Left_to_Top_Right
   653 0000269B 81C14001                    add cx, 320
   654 0000269F 89CE                        mov si, cx
   655 000026A1 81C74001                    add di, 320
   656 000026A5 39C6                        cmp si, ax
   657 000026A7 76EA                        jbe Top_Left_to_Top_Right
   658                                      
   659 000026A9 5F                          pop di
   660 000026AA 5E                          pop si
   661 000026AB 5A                          pop dx
   662 000026AC 59                          pop cx
   663 000026AD 5B                          pop bx
   664 000026AE 58                          pop ax
   665 000026AF 89EC                        mov sp, bp
   666 000026B1 5D                          pop bp
   667 000026B2 C20A00                      ret 10
   668                                  
   669                                  drawBoundary:
   670 000026B5 55                      	push bp
   671 000026B6 89E5                    	mov bp, sp
   672 000026B8 50                      	push ax
   673 000026B9 53                      	push bx
   674 000026BA 51                      	push cx
   675 000026BB 52                      	push dx
   676 000026BC 06                      	push es
   677 000026BD 57                      	push di
   678 000026BE 56                      	push si
   679                                  	
   680                                  	; bp + 4 = h
   681                                  	; bp + 6 = w
   682                                  	; bp + 8 = y
   683                                  	; bp + 10 = x
   684                                  	; bp + 12 = color
   685                                  	
   686 000026BF B800A0                  	mov ax, 0xa000
   687 000026C2 8EC0                    	mov es, ax
   688 000026C4 8B560C                  	mov dx, [bp + 12]
   689                                  	
   690 000026C7 8B4608                  	mov ax, [bp + 8]
   691 000026CA BB4001                      mov bx, 320
   692 000026CD F7E3                        mul bx
   693 000026CF 03460A                      add ax, [bp + 10]
   694 000026D2 89C6                        mov si, ax                ; si at its start point
   695 000026D4 89C1                        mov cx, ax                ; storing si in cx for later use
   696                                      
   697 000026D6 8B4604                      mov ax, [bp + 4]
   698 000026D9 034608                  	add ax, [bp + 8]
   699 000026DC F7E3                    	mul bx
   700 000026DE 03460A                  	add ax, [bp + 10]
   701 000026E1 89C7                    	mov di, ax                ; si at its start point
   702                                  	
   703 000026E3 034606                  	add ax, [bp + 6]
   704                                  
   705 000026E6 89CB                    	mov bx, CX
   706 000026E8 035E06                  	add bx, [bp + 6]
   707                                  	
   708                                  	
   709                                  	
   710                                  loop_b1:
   711 000026EB 268914                  	mov [es:si], dx
   712 000026EE 268915                  	mov [es:di], dx
   713                                  	
   714 000026F1 83C601                  	add si, 1
   715 000026F4 83C701                  	add di, 1
   716                                  	
   717 000026F7 39DE                    	cmp si, bx
   718 000026F9 76F0                    	jbe loop_b1
   719 000026FB 39C7                    	cmp di, ax
   720 000026FD 76EC                    	jbe loop_b1
   721                                  	
   722                                  	
   723 000026FF 89CE                    	mov si, CX       ; si back at its start 
   724 00002701 89DF                    	mov di, bx       ; di at its new start
   725                                  	
   726 00002703 89C3                    	mov bx, ax
   727 00002705 2B5E06                  	sub bx, [bp + 6]
   728                                  	
   729                                  	
   730                                  
   731                                  loop_b2:
   732 00002708 268914                  	mov [es:si], dx
   733 0000270B 268915                  	mov [es:di], dx
   734                                  	
   735 0000270E 81C64001                	add si, 320
   736 00002712 81C74001                	add di, 320
   737                                  	
   738 00002716 39DE                    	cmp si, bx
   739 00002718 76EE                    	jbe loop_b2
   740 0000271A 39C7                    	cmp di, ax
   741 0000271C 76EA                    	jbe loop_b2
   742                                  	
   743                                  	
   744                                  	
   745 0000271E 5E                      	pop si
   746 0000271F 5F                      	pop di
   747 00002720 07                      	pop es
   748 00002721 5A                      	pop dx
   749 00002722 59                      	pop cx
   750 00002723 5B                      	pop bx
   751 00002724 58                      	pop ax
   752 00002725 89EC                    	mov sp, bp
   753 00002727 5D                      	pop bp
   754 00002728 C20A00                  	ret 10
   755                                  
   756                                  ; -------------------------------------
   757                                  ; Bubble Font Data (18 rows, varying widths)
   758                                  ; For "BALLOON BLASTER"
   759                                  ; Left-aligned in 16-bit words
   760                                  ; -------------------------------------
   761                                  
   762                                  
   763                                  ; =====================================================
   764                                  ; MAIN START
   765                                  ; =====================================================
   766                                  main_menu:
   767                                      ; Set graphics mode
   768 0000272B B81300                      mov ax, 0x13
   769 0000272E CD10                        int 0x10
   770                                      
   771                                      ; Set ES to video memory
   772 00002730 B800A0                      mov ax, 0A000h
   773 00002733 8EC0                        mov es, ax
   774                                      
   775                                      ; Draw background first
   776 00002735 E8B8FD                      call drawBackground
   777                                  	; --- Fix specific colors for menu ---
   778                                      ; Set color 4 (red) = RGB(63, 0, 0)
   779 00002738 B81010                      mov ax, 0x1010
   780 0000273B BB2C01                      mov bx, 300
   781 0000273E B63F                        mov dh, 63  ; Red
   782 00002740 B500                        mov ch, 0   ; Green
   783 00002742 B100                        mov cl, 0   ; Blue
   784 00002744 CD10                        int 0x10
   785                                      
   786                                  	; Set color 303 black = RGB(0, 0, 0)
   787 00002746 B81010                      mov ax, 0x1010
   788 00002749 BB2F01                      mov bx, 303
   789 0000274C B600                        mov dh, 0  ; Red
   790 0000274E B500                        mov ch, 0   ; Green
   791 00002750 B100                        mov cl, 0   ; Blue
   792 00002752 CD10                        int 0x10
   793                                  	
   794                                      ; Set color 9 (bright blue) = RGB(0, 0, 63)
   795 00002754 B81010                      mov ax, 0x1010
   796 00002757 BB2D01                      mov bx, 301
   797 0000275A B600                        mov dh, 0   ; Red
   798 0000275C B500                        mov ch, 0   ; Green
   799 0000275E B13F                        mov cl, 63  ; Blue
   800 00002760 CD10                        int 0x10
   801                                      
   802                                      ; Set color 15 (white) = RGB(63, 63, 63)
   803 00002762 B81010                      mov ax, 0x1010
   804 00002765 BB2E01                      mov bx, 302
   805 00002768 B63F                        mov dh, 63  ; Red
   806 0000276A B53F                        mov ch, 63  ; Green
   807 0000276C B13F                        mov cl, 63  ; Blue
   808 0000276E CD10                        int 0x10
   809                                      
   810                                  	
   811                                    
   812                                  	; Example: Draw balloons
   813                                  	
   814 00002770 B92900                      mov cx, 41            ; X position
   815 00002773 BA1E00                      mov dx, 30            ; Y position
   816 00002776 A0[0A00]                    mov al, [red]            ; color (light red)
   817 00002779 E8C7FD                      call DrawBalloon
   818                                  	
   819                                      
   820                                  
   821 0000277C B96400                      mov cx, 100           ; X position
   822 0000277F BA5F00                      mov dx, 95            ; Y position
   823 00002782 A0[0800]                    mov al, [blue]             ; color (light blue)
   824 00002785 E8BBFD                      call DrawBalloon
   825                                      
   826 00002788 B90E01                      mov cx, 270          ; X position
   827 0000278B BA3700                      mov dx, 55            ; Y position
   828 0000278E A0[0600]                    mov al, [white]            ; color (light green)
   829 00002791 E8AFFD                      call DrawBalloon
   830                                  	
   831                                  	
   832                                      ; Now draw rectangles and text on top
   833                                      ; Rectangle 1
   834 00002794 A1[0600]                    mov ax, [white]
   835 00002797 50                          push ax
   836 00002798 A1[0E00]                    mov ax, [x1]
   837 0000279B 50                          push ax
   838 0000279C A1[1000]                    mov ax, [y1]
   839 0000279F 50                          push ax
   840 000027A0 A1[1200]                    mov ax, [w1]
   841 000027A3 50                          push ax
   842 000027A4 A1[1400]                    mov ax, [h1]
   843 000027A7 50                          push ax
   844 000027A8 E8BDFE                      call drawRectangle
   845 000027AB A1[0800]                	mov ax, [blue]
   846 000027AE 50                          push ax
   847 000027AF A1[0E00]                    mov ax, [x1]
   848 000027B2 50                          push ax
   849 000027B3 A1[1000]                    mov ax, [y1]
   850 000027B6 50                          push ax
   851 000027B7 A1[1200]                    mov ax, [w1]
   852 000027BA 50                          push ax
   853 000027BB A1[1400]                    mov ax, [h1]
   854 000027BE 50                          push ax
   855 000027BF E8F3FE                  	call drawBoundary
   856                                      
   857                                      ; Rectangle 2
   858 000027C2 A1[0600]                    mov ax, [white]
   859 000027C5 50                          push ax
   860 000027C6 A1[1600]                    mov ax, [x2]
   861 000027C9 50                          push ax
   862 000027CA A1[1800]                    mov ax, [y2]
   863 000027CD 50                          push ax
   864 000027CE A1[1A00]                    mov ax, [w2]
   865 000027D1 50                          push ax
   866 000027D2 A1[1C00]                    mov ax, [h2]
   867 000027D5 50                          push ax
   868 000027D6 E88FFE                      call drawRectangle
   869 000027D9 A1[0800]                	mov ax, [blue]
   870 000027DC 50                          push ax
   871 000027DD A1[1600]                    mov ax, [x2]
   872 000027E0 50                          push ax
   873 000027E1 A1[1800]                    mov ax, [y2]
   874 000027E4 50                          push ax
   875 000027E5 A1[1A00]                    mov ax, [w2]
   876 000027E8 50                          push ax
   877 000027E9 A1[1C00]                    mov ax, [h2]
   878 000027EC 50                          push ax
   879 000027ED E8C5FE                  	call drawBoundary
   880                                  	
   881                                      
   882                                      ; Rectangle 3
   883 000027F0 A1[0600]                    mov ax, [white]
   884 000027F3 50                          push ax
   885 000027F4 A1[1E00]                    mov ax, [x3]
   886 000027F7 50                          push ax
   887 000027F8 A1[2000]                    mov ax, [y3]
   888 000027FB 50                          push ax
   889 000027FC A1[2200]                    mov ax, [w3]
   890 000027FF 50                          push ax
   891 00002800 A1[2400]                    mov ax, [h3]
   892 00002803 50                          push ax
   893 00002804 E861FE                      call drawRectangle
   894 00002807 A1[0800]                	mov ax, [blue]
   895 0000280A 50                          push ax
   896 0000280B A1[1E00]                    mov ax, [x3]
   897 0000280E 50                          push ax
   898 0000280F A1[2000]                    mov ax, [y3]
   899 00002812 50                          push ax
   900 00002813 A1[2200]                    mov ax, [w3]
   901 00002816 50                          push ax
   902 00002817 A1[2400]                    mov ax, [h3]
   903 0000281A 50                          push ax
   904 0000281B E897FE                  	call drawBoundary
   905                                      
   906                                      ; ===== DRAW TEXT: "PRESS S TO START GAME" =====
   907                                  ; PRESS
   908 0000281E BA[3501]                mov dx, P_data
   909 00002821 8916[0400]              mov [write_word], dx
   910 00002825 B94600                  mov cx, 70
   911 00002828 BA3900                  mov dx, 57
   912 0000282B BE0100                  mov si, 1
   913 0000282E A0[0800]                mov al, [blue]
   914 00002831 A2[0300]                mov [ColorHolder], al
   915 00002834 E8E3FD                  call DrawA
   916                                  
   917 00002837 BA[4501]                mov dx, R_data
   918 0000283A 8916[0400]              mov [write_word], dx
   919 0000283E B94E00                  mov cx, 78
   920 00002841 BA3900                  mov dx, 57
   921 00002844 BE0100                  mov si, 1
   922 00002847 A0[0800]                mov al, [blue]
   923 0000284A A2[0300]                mov [ColorHolder], al
   924 0000284D E8CAFD                  call DrawA
   925                                  
   926 00002850 BA[DD00]                mov dx, E_data
   927 00002853 8916[0400]              mov [write_word], dx
   928 00002857 B95600                  mov cx, 86
   929 0000285A BA3900                  mov dx, 57
   930 0000285D BE0100                  mov si, 1
   931 00002860 A0[0800]                mov al, [blue]
   932 00002863 A2[0300]                mov [ColorHolder], al
   933 00002866 E8B1FD                  call DrawA
   934                                  
   935 00002869 BA[4D01]                mov dx, S_data
   936 0000286C 8916[0400]              mov [write_word], dx
   937 00002870 B95E00                  mov cx, 94
   938 00002873 BA3900                  mov dx, 57
   939 00002876 BE0100                  mov si, 1
   940 00002879 A0[0800]                mov al, [blue]
   941 0000287C A2[0300]                mov [ColorHolder], al
   942 0000287F E898FD                  call DrawA
   943                                  
   944 00002882 BA[4D01]                mov dx, S_data
   945 00002885 8916[0400]              mov [write_word], dx
   946 00002889 B96600                  mov cx, 102
   947 0000288C BA3900                  mov dx, 57
   948 0000288F BE0100                  mov si, 1
   949 00002892 A0[0800]                mov al, [blue]
   950 00002895 A2[0300]                mov [ColorHolder], al
   951 00002898 E87FFD                  call DrawA
   952                                  
   953                                  ; S (in red)
   954 0000289B BA[4D01]                mov dx, S_data
   955 0000289E 8916[0400]              mov [write_word], dx
   956 000028A2 B97800                  mov cx, 120
   957 000028A5 BA3900                  mov dx, 57
   958 000028A8 BE0100                  mov si, 1
   959 000028AB A0[0A00]                mov al, [red]
   960 000028AE A2[0300]                mov [ColorHolder], al
   961 000028B1 E866FD                  call DrawA
   962                                  
   963                                  ; TO
   964 000028B4 BA[5501]                mov dx, T_data
   965 000028B7 8916[0400]              mov [write_word], dx
   966 000028BB B98A00                  mov cx, 138
   967 000028BE BA3900                  mov dx, 57
   968 000028C1 BE0100                  mov si, 1
   969 000028C4 A0[0800]                mov al, [blue]
   970 000028C7 A2[0300]                mov [ColorHolder], al
   971 000028CA E84DFD                  call DrawA
   972                                  
   973 000028CD BA[2D01]                mov dx, O_data
   974 000028D0 8916[0400]              mov [write_word], dx
   975 000028D4 B99200                  mov cx, 146
   976 000028D7 BA3900                  mov dx, 57
   977 000028DA BE0100                  mov si, 1
   978 000028DD A0[0800]                mov al, [blue]
   979 000028E0 A2[0300]                mov [ColorHolder], al
   980 000028E3 E834FD                  call DrawA
   981                                  
   982                                  ; START
   983 000028E6 BA[4D01]                mov dx, S_data
   984 000028E9 8916[0400]              mov [write_word], dx
   985 000028ED B9A400                  mov cx, 164
   986 000028F0 BA3900                  mov dx, 57
   987 000028F3 BE0100                  mov si, 1
   988 000028F6 A0[0800]                mov al, [blue]
   989 000028F9 A2[0300]                mov [ColorHolder], al
   990 000028FC E81BFD                  call DrawA
   991                                  
   992 000028FF BA[5501]                mov dx, T_data
   993 00002902 8916[0400]              mov [write_word], dx
   994 00002906 B9AC00                  mov cx, 172
   995 00002909 BA3900                  mov dx, 57
   996 0000290C BE0100                  mov si, 1
   997 0000290F A0[0800]                mov al, [blue]
   998 00002912 A2[0300]                mov [ColorHolder], al
   999 00002915 E802FD                  call DrawA
  1000                                  
  1001 00002918 BA[BD00]                mov dx, A_data
  1002 0000291B 8916[0400]              mov [write_word], dx
  1003 0000291F B9B400                  mov cx, 180
  1004 00002922 BA3900                  mov dx, 57
  1005 00002925 BE0100                  mov si, 1
  1006 00002928 A0[0800]                mov al, [blue]
  1007 0000292B A2[0300]                mov [ColorHolder], al
  1008 0000292E E8E9FC                  call DrawA
  1009                                  
  1010 00002931 BA[4501]                mov dx, R_data
  1011 00002934 8916[0400]              mov [write_word], dx
  1012 00002938 B9BC00                  mov cx, 188
  1013 0000293B BA3900                  mov dx, 57
  1014 0000293E BE0100                  mov si, 1
  1015 00002941 A0[0800]                mov al, [blue]
  1016 00002944 A2[0300]                mov [ColorHolder], al
  1017 00002947 E8D0FC                  call DrawA
  1018                                  
  1019 0000294A BA[5501]                mov dx, T_data
  1020 0000294D 8916[0400]              mov [write_word], dx
  1021 00002951 B9C400                  mov cx, 196
  1022 00002954 BA3900                  mov dx, 57
  1023 00002957 BE0100                  mov si, 1
  1024 0000295A A0[0800]                mov al, [blue]
  1025 0000295D A2[0300]                mov [ColorHolder], al
  1026 00002960 E8B7FC                  call DrawA
  1027                                  
  1028                                  ; GAME
  1029 00002963 BA[ED00]                mov dx, G_data
  1030 00002966 8916[0400]              mov [write_word], dx
  1031 0000296A B9D600                  mov cx, 214
  1032 0000296D BA3900                  mov dx, 57
  1033 00002970 BE0100                  mov si, 1
  1034 00002973 A0[0800]                mov al, [blue]
  1035 00002976 A2[0300]                mov [ColorHolder], al
  1036 00002979 E89EFC                  call DrawA
  1037                                  
  1038 0000297C BA[BD00]                mov dx, A_data
  1039 0000297F 8916[0400]              mov [write_word], dx
  1040 00002983 B9DE00                  mov cx, 222
  1041 00002986 BA3900                  mov dx, 57
  1042 00002989 BE0100                  mov si, 1
  1043 0000298C A0[0800]                mov al, [blue]
  1044 0000298F A2[0300]                mov [ColorHolder], al
  1045 00002992 E885FC                  call DrawA
  1046                                  
  1047 00002995 BA[1D01]                mov dx, M_data
  1048 00002998 8916[0400]              mov [write_word], dx
  1049 0000299C B9E600                  mov cx, 230
  1050 0000299F BA3900                  mov dx, 57
  1051 000029A2 BE0100                  mov si, 1
  1052 000029A5 A0[0800]                mov al, [blue]
  1053 000029A8 A2[0300]                mov [ColorHolder], al
  1054 000029AB E86CFC                  call DrawA
  1055                                  
  1056 000029AE BA[DD00]                mov dx, E_data
  1057 000029B1 8916[0400]              mov [write_word], dx
  1058 000029B5 B9EE00                  mov cx, 238
  1059 000029B8 BA3900                  mov dx, 57
  1060 000029BB BE0100                  mov si, 1
  1061 000029BE A0[0800]                mov al, [blue]
  1062 000029C1 A2[0300]                mov [ColorHolder], al
  1063 000029C4 E853FC                  call DrawA
  1064                                  
  1065                                  ; ===== DRAW TEXT: "PRESS T TO CHANGE THEME" =====
  1066                                  ; PRESS
  1067 000029C7 BA[3501]                mov dx, P_data
  1068 000029CA 8916[0400]              mov [write_word], dx
  1069 000029CE B94600                  mov cx, 70
  1070 000029D1 BA6B00                  mov dx, 107
  1071 000029D4 BE0100                  mov si, 1
  1072 000029D7 A0[0800]                mov al, [blue]
  1073 000029DA A2[0300]                mov [ColorHolder], al
  1074 000029DD E83AFC                  call DrawA
  1075                                  
  1076 000029E0 BA[4501]                mov dx, R_data
  1077 000029E3 8916[0400]              mov [write_word], dx
  1078 000029E7 B94E00                  mov cx, 78
  1079 000029EA BA6B00                  mov dx, 107
  1080 000029ED BE0100                  mov si, 1
  1081 000029F0 A0[0800]                mov al, [blue]
  1082 000029F3 A2[0300]                mov [ColorHolder], al
  1083 000029F6 E821FC                  call DrawA
  1084                                  
  1085 000029F9 BA[DD00]                mov dx, E_data
  1086 000029FC 8916[0400]              mov [write_word], dx
  1087 00002A00 B95600                  mov cx, 86
  1088 00002A03 BA6B00                  mov dx, 107
  1089 00002A06 BE0100                  mov si, 1
  1090 00002A09 A0[0800]                mov al, [blue]
  1091 00002A0C A2[0300]                mov [ColorHolder], al
  1092 00002A0F E808FC                  call DrawA
  1093                                  
  1094 00002A12 BA[4D01]                mov dx, S_data
  1095 00002A15 8916[0400]              mov [write_word], dx
  1096 00002A19 B95E00                  mov cx, 94
  1097 00002A1C BA6B00                  mov dx, 107
  1098 00002A1F BE0100                  mov si, 1
  1099 00002A22 A0[0800]                mov al, [blue]
  1100 00002A25 A2[0300]                mov [ColorHolder], al
  1101 00002A28 E8EFFB                  call DrawA
  1102                                  
  1103 00002A2B BA[4D01]                mov dx, S_data
  1104 00002A2E 8916[0400]              mov [write_word], dx
  1105 00002A32 B96600                  mov cx, 102
  1106 00002A35 BA6B00                  mov dx, 107
  1107 00002A38 BE0100                  mov si, 1
  1108 00002A3B A0[0800]                mov al, [blue]
  1109 00002A3E A2[0300]                mov [ColorHolder], al
  1110 00002A41 E8D6FB                  call DrawA
  1111                                  
  1112                                  ; T (in red)
  1113 00002A44 BA[5501]                mov dx, T_data
  1114 00002A47 8916[0400]              mov [write_word], dx
  1115 00002A4B B97400                  mov cx, 116
  1116 00002A4E BA6B00                  mov dx, 107
  1117 00002A51 BE0100                  mov si, 1
  1118 00002A54 A0[0A00]                mov al, [red]
  1119 00002A57 A2[0300]                mov [ColorHolder], al
  1120 00002A5A E8BDFB                  call DrawA
  1121                                  
  1122                                  ; TO
  1123 00002A5D BA[5501]                mov dx, T_data
  1124 00002A60 8916[0400]              mov [write_word], dx
  1125 00002A64 B98200                  mov cx, 130
  1126 00002A67 BA6B00                  mov dx, 107
  1127 00002A6A BE0100                  mov si, 1
  1128 00002A6D A0[0800]                mov al, [blue]
  1129 00002A70 A2[0300]                mov [ColorHolder], al
  1130 00002A73 E8A4FB                  call DrawA
  1131                                  
  1132 00002A76 BA[2D01]                mov dx, O_data
  1133 00002A79 8916[0400]              mov [write_word], dx
  1134 00002A7D B98A00                  mov cx, 138
  1135 00002A80 BA6B00                  mov dx, 107
  1136 00002A83 BE0100                  mov si, 1
  1137 00002A86 A0[0800]                mov al, [blue]
  1138 00002A89 A2[0300]                mov [ColorHolder], al
  1139 00002A8C E88BFB                  call DrawA
  1140                                  
  1141                                  ; CHANGE
  1142 00002A8F BA[CD00]                mov dx, C_data
  1143 00002A92 8916[0400]              mov [write_word], dx
  1144 00002A96 B99600                  mov cx, 150
  1145 00002A99 BA6B00                  mov dx, 107
  1146 00002A9C BE0100                  mov si, 1
  1147 00002A9F A0[0800]                mov al, [blue]
  1148 00002AA2 A2[0300]                mov [ColorHolder], al
  1149 00002AA5 E872FB                  call DrawA
  1150                                  
  1151 00002AA8 BA[F500]                mov dx, H_data
  1152 00002AAB 8916[0400]              mov [write_word], dx
  1153 00002AAF B99E00                  mov cx, 158
  1154 00002AB2 BA6B00                  mov dx, 107
  1155 00002AB5 BE0100                  mov si, 1
  1156 00002AB8 A0[0800]                mov al, [blue]
  1157 00002ABB A2[0300]                mov [ColorHolder], al
  1158 00002ABE E859FB                  call DrawA
  1159                                  
  1160 00002AC1 BA[BD00]                mov dx, A_data
  1161 00002AC4 8916[0400]              mov [write_word], dx
  1162 00002AC8 B9A600                  mov cx, 166
  1163 00002ACB BA6B00                  mov dx, 107
  1164 00002ACE BE0100                  mov si, 1
  1165 00002AD1 A0[0800]                mov al, [blue]
  1166 00002AD4 A2[0300]                mov [ColorHolder], al
  1167 00002AD7 E840FB                  call DrawA
  1168                                  
  1169 00002ADA BA[2501]                mov dx, N_data
  1170 00002ADD 8916[0400]              mov [write_word], dx
  1171 00002AE1 B9AE00                  mov cx, 174
  1172 00002AE4 BA6B00                  mov dx, 107
  1173 00002AE7 BE0100                  mov si, 1
  1174 00002AEA A0[0800]                mov al, [blue]
  1175 00002AED A2[0300]                mov [ColorHolder], al
  1176 00002AF0 E827FB                  call DrawA
  1177                                  
  1178 00002AF3 BA[ED00]                mov dx, G_data
  1179 00002AF6 8916[0400]              mov [write_word], dx
  1180 00002AFA B9B600                  mov cx, 182
  1181 00002AFD BA6B00                  mov dx, 107
  1182 00002B00 BE0100                  mov si, 1
  1183 00002B03 A0[0800]                mov al, [blue]
  1184 00002B06 A2[0300]                mov [ColorHolder], al
  1185 00002B09 E80EFB                  call DrawA
  1186                                  
  1187 00002B0C BA[DD00]                mov dx, E_data
  1188 00002B0F 8916[0400]              mov [write_word], dx
  1189 00002B13 B9BE00                  mov cx, 190
  1190 00002B16 BA6B00                  mov dx, 107
  1191 00002B19 BE0100                  mov si, 1
  1192 00002B1C A0[0800]                mov al, [blue]
  1193 00002B1F A2[0300]                mov [ColorHolder], al
  1194 00002B22 E8F5FA                  call DrawA
  1195                                  
  1196                                  ; THEME
  1197 00002B25 BA[5501]                mov dx, T_data
  1198 00002B28 8916[0400]              mov [write_word], dx
  1199 00002B2C B9D000                  mov cx, 208
  1200 00002B2F BA6B00                  mov dx, 107
  1201 00002B32 BE0100                  mov si, 1
  1202 00002B35 A0[0800]                mov al, [blue]
  1203 00002B38 A2[0300]                mov [ColorHolder], al
  1204 00002B3B E8DCFA                  call DrawA
  1205                                  
  1206 00002B3E BA[F500]                mov dx, H_data
  1207 00002B41 8916[0400]              mov [write_word], dx
  1208 00002B45 B9D800                  mov cx, 216
  1209 00002B48 BA6B00                  mov dx, 107
  1210 00002B4B BE0100                  mov si, 1
  1211 00002B4E A0[0800]                mov al, [blue]
  1212 00002B51 A2[0300]                mov [ColorHolder], al
  1213 00002B54 E8C3FA                  call DrawA
  1214                                  
  1215 00002B57 BA[DD00]                mov dx, E_data
  1216 00002B5A 8916[0400]              mov [write_word], dx
  1217 00002B5E B9E000                  mov cx, 224
  1218 00002B61 BA6B00                  mov dx, 107
  1219 00002B64 BE0100                  mov si, 1
  1220 00002B67 A0[0800]                mov al, [blue]
  1221 00002B6A A2[0300]                mov [ColorHolder], al
  1222 00002B6D E8AAFA                  call DrawA
  1223                                  
  1224 00002B70 BA[1D01]                mov dx, M_data
  1225 00002B73 8916[0400]              mov [write_word], dx
  1226 00002B77 B9E800                  mov cx, 232
  1227 00002B7A BA6B00                  mov dx, 107
  1228 00002B7D BE0100                  mov si, 1
  1229 00002B80 A0[0800]                mov al, [blue]
  1230 00002B83 A2[0300]                mov [ColorHolder], al
  1231 00002B86 E891FA                  call DrawA
  1232                                  
  1233 00002B89 BA[DD00]                mov dx, E_data
  1234 00002B8C 8916[0400]              mov [write_word], dx
  1235 00002B90 B9F000                  mov cx, 240
  1236 00002B93 BA6B00                  mov dx, 107
  1237 00002B96 BE0100                  mov si, 1
  1238 00002B99 A0[0800]                mov al, [blue]
  1239 00002B9C A2[0300]                mov [ColorHolder], al
  1240 00002B9F E878FA                  call DrawA
  1241                                  
  1242                                  ; ===== DRAW TEXT: "PRESS E TO EXIT GAME" =====
  1243                                  ; PRESS
  1244 00002BA2 BA[3501]                mov dx, P_data
  1245 00002BA5 8916[0400]              mov [write_word], dx
  1246 00002BA9 B94600                  mov cx, 70
  1247 00002BAC BA9D00                  mov dx, 157
  1248 00002BAF BE0100                  mov si, 1
  1249 00002BB2 A0[0800]                mov al, [blue]
  1250 00002BB5 A2[0300]                mov [ColorHolder], al
  1251 00002BB8 E85FFA                  call DrawA
  1252                                  
  1253 00002BBB BA[4501]                mov dx, R_data
  1254 00002BBE 8916[0400]              mov [write_word], dx
  1255 00002BC2 B94E00                  mov cx, 78
  1256 00002BC5 BA9D00                  mov dx, 157
  1257 00002BC8 BE0100                  mov si, 1
  1258 00002BCB A0[0800]                mov al, [blue]
  1259 00002BCE A2[0300]                mov [ColorHolder], al
  1260 00002BD1 E846FA                  call DrawA
  1261                                  
  1262 00002BD4 BA[DD00]                mov dx, E_data
  1263 00002BD7 8916[0400]              mov [write_word], dx
  1264 00002BDB B95600                  mov cx, 86
  1265 00002BDE BA9D00                  mov dx, 157
  1266 00002BE1 BE0100                  mov si, 1
  1267 00002BE4 A0[0800]                mov al, [blue]
  1268 00002BE7 A2[0300]                mov [ColorHolder], al
  1269 00002BEA E82DFA                  call DrawA
  1270                                  
  1271 00002BED BA[4D01]                mov dx, S_data
  1272 00002BF0 8916[0400]              mov [write_word], dx
  1273 00002BF4 B95E00                  mov cx, 94
  1274 00002BF7 BA9D00                  mov dx, 157
  1275 00002BFA BE0100                  mov si, 1
  1276 00002BFD A0[0800]                mov al, [blue]
  1277 00002C00 A2[0300]                mov [ColorHolder], al
  1278 00002C03 E814FA                  call DrawA
  1279                                  
  1280 00002C06 BA[4D01]                mov dx, S_data
  1281 00002C09 8916[0400]              mov [write_word], dx
  1282 00002C0D B96600                  mov cx, 102
  1283 00002C10 BA9D00                  mov dx, 157
  1284 00002C13 BE0100                  mov si, 1
  1285 00002C16 A0[0800]                mov al, [blue]
  1286 00002C19 A2[0300]                mov [ColorHolder], al
  1287 00002C1C E8FBF9                  call DrawA
  1288                                  
  1289                                  ; E (in red)
  1290 00002C1F BA[DD00]                mov dx, E_data
  1291 00002C22 8916[0400]              mov [write_word], dx
  1292 00002C26 B97A00                  mov cx, 122
  1293 00002C29 BA9D00                  mov dx, 157
  1294 00002C2C BE0100                  mov si, 1
  1295 00002C2F A0[0A00]                mov al, [red]
  1296 00002C32 A2[0300]                mov [ColorHolder], al
  1297 00002C35 E8E2F9                  call DrawA
  1298                                  
  1299                                  ; TO
  1300 00002C38 BA[5501]                mov dx, T_data
  1301 00002C3B 8916[0400]              mov [write_word], dx
  1302 00002C3F B98C00                  mov cx, 140
  1303 00002C42 BA9D00                  mov dx, 157
  1304 00002C45 BE0100                  mov si, 1
  1305 00002C48 A0[0800]                mov al, [blue]
  1306 00002C4B A2[0300]                mov [ColorHolder], al
  1307 00002C4E E8C9F9                  call DrawA
  1308                                  
  1309 00002C51 BA[2D01]                mov dx, O_data
  1310 00002C54 8916[0400]              mov [write_word], dx
  1311 00002C58 B99400                  mov cx, 148
  1312 00002C5B BA9D00                  mov dx, 157
  1313 00002C5E BE0100                  mov si, 1
  1314 00002C61 A0[0800]                mov al, [blue]
  1315 00002C64 A2[0300]                mov [ColorHolder], al
  1316 00002C67 E8B0F9                  call DrawA
  1317                                  
  1318                                  ; EXIT
  1319 00002C6A BA[DD00]                mov dx, E_data
  1320 00002C6D 8916[0400]              mov [write_word], dx
  1321 00002C71 B9A800                  mov cx, 168
  1322 00002C74 BA9D00                  mov dx, 157
  1323 00002C77 BE0100                  mov si, 1
  1324 00002C7A A0[0800]                mov al, [blue]
  1325 00002C7D A2[0300]                mov [ColorHolder], al
  1326 00002C80 E897F9                  call DrawA
  1327                                  
  1328 00002C83 BA[7501]                mov dx, X_data
  1329 00002C86 8916[0400]              mov [write_word], dx
  1330 00002C8A B9B000                  mov cx, 176
  1331 00002C8D BA9D00                  mov dx, 157
  1332 00002C90 BE0100                  mov si, 1
  1333 00002C93 A0[0800]                mov al, [blue]
  1334 00002C96 A2[0300]                mov [ColorHolder], al
  1335 00002C99 E87EF9                  call DrawA
  1336                                  
  1337 00002C9C BA[FD00]                mov dx, I_data
  1338 00002C9F 8916[0400]              mov [write_word], dx
  1339 00002CA3 B9B800                  mov cx, 184
  1340 00002CA6 BA9D00                  mov dx, 157
  1341 00002CA9 BE0100                  mov si, 1
  1342 00002CAC A0[0800]                mov al, [blue]
  1343 00002CAF A2[0300]                mov [ColorHolder], al
  1344 00002CB2 E865F9                  call DrawA
  1345                                  
  1346 00002CB5 BA[5501]                mov dx, T_data
  1347 00002CB8 8916[0400]              mov [write_word], dx
  1348 00002CBC B9C000                  mov cx, 192
  1349 00002CBF BA9D00                  mov dx, 157
  1350 00002CC2 BE0100                  mov si, 1
  1351 00002CC5 A0[0800]                mov al, [blue]
  1352 00002CC8 A2[0300]                mov [ColorHolder], al
  1353 00002CCB E84CF9                  call DrawA
  1354                                  
  1355                                  ; GAME
  1356 00002CCE BA[ED00]                mov dx, G_data
  1357 00002CD1 8916[0400]              mov [write_word], dx
  1358 00002CD5 B9D600                  mov cx, 214
  1359 00002CD8 BA9D00                  mov dx, 157
  1360 00002CDB BE0100                  mov si, 1
  1361 00002CDE A0[0800]                mov al, [blue]
  1362 00002CE1 A2[0300]                mov [ColorHolder], al
  1363 00002CE4 E833F9                  call DrawA
  1364                                  
  1365 00002CE7 BA[BD00]                mov dx, A_data
  1366 00002CEA 8916[0400]              mov [write_word], dx
  1367 00002CEE B9DE00                  mov cx, 222
  1368 00002CF1 BA9D00                  mov dx, 157
  1369 00002CF4 BE0100                  mov si, 1
  1370 00002CF7 A0[0800]                mov al, [blue]
  1371 00002CFA A2[0300]                mov [ColorHolder], al
  1372 00002CFD E81AF9                  call DrawA
  1373                                  
  1374 00002D00 BA[1D01]                mov dx, M_data
  1375 00002D03 8916[0400]              mov [write_word], dx
  1376 00002D07 B9E600                  mov cx, 230
  1377 00002D0A BA9D00                  mov dx, 157
  1378 00002D0D BE0100                  mov si, 1
  1379 00002D10 A0[0800]                mov al, [blue]
  1380 00002D13 A2[0300]                mov [ColorHolder], al
  1381 00002D16 E801F9                  call DrawA
  1382                                  
  1383 00002D19 BA[DD00]                mov dx, E_data
  1384 00002D1C 8916[0400]              mov [write_word], dx
  1385 00002D20 B9EE00                  mov cx, 238
  1386 00002D23 BA9D00                  mov dx, 157
  1387 00002D26 BE0100                  mov si, 1
  1388 00002D29 A0[0800]                mov al, [blue]
  1389 00002D2C A2[0300]                mov [ColorHolder], al
  1390 00002D2F E8E8F8                  call DrawA
  1391                                  
  1392                                  
  1393                                  
  1394                                  	
  1395                                  	
  1396                                  	
  1397                                  ; Wait for keypress
  1398 00002D32 B400                    mov ah, 0
  1399 00002D34 CD16                    int 16h
  1400                                  
  1401                                  ; Restore text mode
  1402 00002D36 B80300                  mov ax, 3
  1403 00002D39 CD10                    int 10h
  1404 00002D3B C3                      ret
